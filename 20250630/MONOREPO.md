# ğŸ—ï¸ Monorepo æ¶æ„è¯´æ˜

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ **npm workspaces** ç®¡ç†çš„ TypeScript å…¨æ ˆ Monorepoï¼ŒåŒ…å«ï¼š

- **Frontend**: React + TypeScript + Vite
- **Backend**: Node.js + Express + TypeScript
- **å…±äº«é…ç½®**: ESLint, Prettier, TypeScript

## ğŸ“ é¡¹ç›®ç»“æ„

```
typescript-fullstack-monorepo/
â”œâ”€â”€ package.json              # æ ¹å·¥ä½œåŒºé…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é¡¹ç›®å¼•ç”¨æ ¹é…ç½®
â”œâ”€â”€ .eslintrc.js              # å…±äº« ESLint é…ç½®
â”œâ”€â”€ .prettierrc               # å…±äº« Prettier é…ç½®
â”œâ”€â”€ .vscode/                  # å…±äº« VS Code é…ç½®
â”œâ”€â”€ backend/                  # åç«¯å·¥ä½œåŒº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ index.ts         # Express æœåŠ¡å™¨
â”‚   â”œâ”€â”€ package.json         # åç«¯ä¾èµ–å’Œè„šæœ¬
â”‚   â””â”€â”€ tsconfig.json        # åç«¯ TypeScript é…ç½®
â””â”€â”€ frontend/                 # å‰ç«¯å·¥ä½œåŒº
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ App.tsx          # React ä¸»ç»„ä»¶
    â”‚   â””â”€â”€ main.tsx         # React å…¥å£
    â”œâ”€â”€ package.json         # å‰ç«¯ä¾èµ–å’Œè„šæœ¬
    â””â”€â”€ tsconfig.json        # å‰ç«¯ TypeScript é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–ï¼ˆä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰å·¥ä½œåŒºï¼‰

```bash
npm install
```

### å¼€å‘æ¨¡å¼ï¼ˆåŒæ—¶å¯åŠ¨å‰åç«¯ï¼‰

```bash
npm run dev
```

## ğŸ“‹ Monorepo å‘½ä»¤

### ğŸ”§ å¼€å‘å’Œæ„å»º

```bash
# åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆæ¨èï¼‰
npm run dev

# åˆ†åˆ«å¯åŠ¨
npm run dev:backend      # å¯åŠ¨åç«¯ (http://localhost:3001)
npm run dev:frontend     # å¯åŠ¨å‰ç«¯ (http://localhost:5173)

# æ„å»ºæ‰€æœ‰å·¥ä½œåŒº
npm run build

# æ„å»ºç‰¹å®šå·¥ä½œåŒº
npm run build:backend
npm run build:frontend
```

### ğŸ¨ ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
npm run format

# æ£€æŸ¥æ‰€æœ‰å·¥ä½œåŒºçš„ä»£ç è´¨é‡
npm run lint

# è‡ªåŠ¨ä¿®å¤ lint é—®é¢˜
npm run lint:fix

# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# ç›‘å¬æ¨¡å¼çš„ç±»å‹æ£€æŸ¥
npm run type-check:watch
```

### ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰å·¥ä½œåŒºçš„æµ‹è¯•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
npm run test
```

### ğŸ”§ ä¾èµ–ç®¡ç†

```bash
# æ›´æ–°æ‰€æœ‰å·¥ä½œåŒºä¾èµ–
npm run deps:update

# å®‰å…¨å®¡è®¡æ‰€æœ‰å·¥ä½œåŒº
npm run deps:audit

# æ¸…ç†æ‰€æœ‰æ„å»ºäº§ç‰©å’Œç¼“å­˜
npm run clean
```

### ğŸ¯ å·¥ä½œåŒºç‰¹å®šæ“ä½œ

```bash
# åœ¨ç‰¹å®šå·¥ä½œåŒºè¿è¡Œå‘½ä»¤
npm run <script> --workspace=<workspace-name>

# ä¾‹å¦‚ï¼š
npm run dev --workspace=backend
npm run build --workspace=frontend
npm install <package> --workspace=backend
```

## ğŸŒŸ Monorepo ä¼˜åŠ¿

### âœ… ç»Ÿä¸€ç®¡ç†

- **ä¾èµ–ç®¡ç†**: å…±äº«ä¾èµ–ï¼Œå‡å°‘é‡å¤å®‰è£…
- **é…ç½®ç»Ÿä¸€**: ESLint, Prettier, TypeScript é…ç½®å…±äº«
- **è„šæœ¬ç»Ÿä¸€**: ä¸€å¥—å‘½ä»¤ç®¡ç†æ‰€æœ‰å­é¡¹ç›®

### âœ… å¼€å‘æ•ˆç‡

- **ä¸€é”®å¯åŠ¨**: `npm run dev` å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
- **çƒ­é‡è½½**: å‰åç«¯ä»£ç ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ
- **ç±»å‹å®‰å…¨**: å…¨æ ˆ TypeScript æ”¯æŒ

### âœ… ä»£ç è´¨é‡

- **ç»Ÿä¸€æ ‡å‡†**: æ‰€æœ‰é¡¹ç›®ä½¿ç”¨ç›¸åŒçš„ä»£ç è§„èŒƒ
- **è‡ªåŠ¨æ ¼å¼åŒ–**: ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
- **ç±»å‹æ£€æŸ¥**: æ„å»ºæ—¶è‡ªåŠ¨è¿›è¡Œç±»å‹æ£€æŸ¥

### âœ… éƒ¨ç½²ä¾¿åˆ©

- **ç»Ÿä¸€æ„å»º**: ä¸€ä¸ªå‘½ä»¤æ„å»ºæ‰€æœ‰é¡¹ç›®
- **ç‰ˆæœ¬ç®¡ç†**: ç»Ÿä¸€çš„ç‰ˆæœ¬æ§åˆ¶
- **CI/CD å‹å¥½**: æ›´å®¹æ˜“é…ç½®æŒç»­é›†æˆ

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### æ·»åŠ æ–°çš„å·¥ä½œåŒº

1. åˆ›å»ºæ–°ç›®å½•ï¼Œå¦‚ `shared/`
2. åœ¨æ ¹ `package.json` çš„ `workspaces` æ•°ç»„ä¸­æ·»åŠ  `"shared"`
3. åœ¨æ–°ç›®å½•åˆ›å»º `package.json`
4. è¿è¡Œ `npm install` é‡æ–°é“¾æ¥ä¾èµ–

### å·¥ä½œåŒºé—´å…±äº«ä»£ç 

```bash
# ä»ä¸€ä¸ªå·¥ä½œåŒºå¼•ç”¨å¦ä¸€ä¸ªå·¥ä½œåŒºçš„åŒ…
npm install <workspace-name> --workspace=<target-workspace>
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **ä¾èµ–ç®¡ç†**: å°½é‡åœ¨æ ¹ç›®å½•å®‰è£…å…±äº«ä¾èµ–
2. **é…ç½®æ–‡ä»¶**: å…±äº«é…ç½®æ”¾åœ¨æ ¹ç›®å½•
3. **è„šæœ¬å‘½å**: ä¿æŒå·¥ä½œåŒºé—´è„šæœ¬å‘½åä¸€è‡´
4. **ç±»å‹å®šä¹‰**: å¯è€ƒè™‘åˆ›å»º `@types` å·¥ä½œåŒºå…±äº«ç±»å‹
5. **ç¯å¢ƒå˜é‡**: ä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†ä¸åŒç¯å¢ƒé…ç½®

è¿™ä¸ª Monorepo ä¸ºæ‚¨çš„å…¨æ ˆå¼€å‘æä¾›äº†ä¸€ä¸ªå¼ºå¤§ã€é«˜æ•ˆçš„å·¥ä½œç¯å¢ƒï¼ğŸš€
