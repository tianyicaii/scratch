# 测试文件夹结构

本目录包含 Supabase 项目的所有测试代码。

## 📁 目录结构

```
test/
├── unit/           # 单元测试
├── integration/    # 集成测试
├── e2e/           # 端到端测试
├── fixtures/      # 测试数据和模拟数据
├── utils/         # 测试工具和辅助函数
└── README.md      # 本文档
```

## 🧪 测试类型说明

### Unit Tests (单元测试)
- **目录**: `test/unit/`
- **用途**: 测试单个函数或组件的功能
- **示例**: 
  - 测试用户验证函数
  - 测试数据转换工具
  - 测试配置加载逻辑

### Integration Tests (集成测试)
- **目录**: `test/integration/`
- **用途**: 测试多个组件或服务之间的交互
- **示例**:
  - 测试 Edge Function 与数据库的交互
  - 测试认证流程
  - 测试 API 端点

### End-to-End Tests (端到端测试)
- **目录**: `test/e2e/`
- **用途**: 测试完整的用户流程
- **示例**:
  - 用户注册到登录的完整流程
  - CRUD 操作的完整生命周期
  - 多环境部署测试

### Fixtures (测试数据)
- **目录**: `test/fixtures/`
- **用途**: 存放测试用的静态数据和模拟数据
- **示例**:
  - 模拟用户数据
  - API 响应样例
  - 数据库种子数据

### Utils (测试工具)
- **目录**: `test/utils/`
- **用途**: 测试相关的辅助函数和工具
- **示例**:
  - 数据库连接工具
  - 测试环境设置
  - 通用断言函数

## 🚀 运行测试

```bash
# 运行所有测试
npm test

# 运行单元测试
npm run test:unit

# 运行集成测试
npm run test:integration

# 运行端到端测试
npm run test:e2e

# 运行测试并生成覆盖率报告
npm run test:coverage
```

## 📋 测试命名规范

- **文件命名**: `*.test.ts` 或 `*.spec.ts`
- **测试描述**: 使用清晰的描述性语言
- **分组**: 使用 `describe` 块进行逻辑分组

## 🛠️ 推荐的测试工具

- **测试框架**: Jest / Vitest
- **断言库**: Jest / Chai
- **模拟库**: Jest mocks / Sinon
- **E2E测试**: Playwright / Cypress
- **API测试**: Supertest

## 📝 测试最佳实践

1. **独立性**: 每个测试应该独立运行
2. **清晰性**: 测试名称应该清楚描述测试内容
3. **覆盖率**: 保持合理的代码覆盖率
4. **速度**: 优化测试执行速度
5. **维护性**: 保持测试代码的可读性和可维护性 